@colorA0: #486071;
@colorA1: #DDE9F2;
@colorA2: #7D919E;
@colorA3: #253845;
@colorA4: #0D1C27;

@colorB0: #A56571;
@colorB1: #FDE5E9;
@colorB2: #E7B4BD;
@colorB3: #66333C;
@colorB4: #391017;

@colorC0: #6E975D;
@colorC1: #E9FAE2;
@colorC2: #B3D4A5;
@colorC3: #3D5D2F;
@colorC4: #1A340F;

@colorD0: #B0936C;
@colorD1: #FFF5E7;
@colorD2: #F7DFC0;
@colorD3: #6C5537;
@colorD4: #3D2A11;

@colorConstant1: @colorA0;
@colorConstant2: @colorB3;
@colorConstant3: @colorC3;
@colorConstant4: @colorD3;
@colorConstant5: @colorB0;
@colorConstant6: @colorC0;
@colorConstant7: @colorD0;




// header
@headerColor: @colorA1;
@headerBg: @colorA0;
//
@padding: 20px;
// button
@btnColor: #FFF;
@btnColorBg: #5688b3;
@btnColorBorder: #2f353e;
@btnHoverColor: #FFF;
@btnHoverColorBg: #4d7aa1;
@btnHoverColorBorder: #2f353e;
@btnRadius: .14rem;
//
@uiBgColor: rgba(0,0,0,.6);

/////
//font-family: 'Cousine', ;
//font-family: 'Nova Mono', ;
/////

body {
	margin: 0;
	overflow: hidden;
	font-family: Cousine, monospace;
	font-size: 13px;
	color: #cccccc;
	background-color: #050505;
}

* {
	user-select: none;
	-webkit-user-select: none;
}

h1, h2, h3, h4 {
	line-height: 140%;
	text-transform: uppercase;
}

h1 {
	margin: 0 0 5px;
	font-family: 'Nova Mono', monospace;
	font-size: 22px;
	text-align: center;
	label[for^=tabs-] {
		box-shadow: none;
		//border-top-left-radius: 0;
		border-top-right-radius: 0;
		//border-bottom-left-radius: 3px;
		//border-bottom-right-radius: 3px;
		font-size: inherit;
	}
}
h2 { font-size: 16px; }
h3 { font-size: 14px; }

input.form-control[type=range] {
	padding: 0;
}

fieldset {
	position: relative;
	&.flat { margin: 0; }
}

input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input, select, option {
	color: #333;
}

.form-group {
	margin-bottom: .5rem;
	&:last-child { margin-bottom: 0; }
}

.form-control, .btn {
	border-radius: @btnRadius;
}
.form-control-sm {
	padding: .05rem .5rem;
	line-height: 100%;
}

.btn {
	transition: background-color 200ms ease-in-out, padding 200ms ease-in-out;
	&.btn-sm {
		font-size: 12px;
    line-height: 160%;
    padding: 2px 10px 0;
	}
}

.button(@fore,@background,@border){
	color: @fore;
	background-color: @background;
	background: linear-gradient(to bottom, @background 0%, darken(@background,5%) 100%);
	border-color: @border;
	text-shadow: -1px -1px 1px rgba(0,0,0,0.3), 1px 1px 1px rgba(255,255,255,0.6);
	&:hover {
		color: @fore;
		background-color: @btnHoverColorBg;
		background: linear-gradient(to bottom, @background 5%, darken(@background,10%) 100%);
		border-color: darken(@border,5%);
	}
}

.btn-primary { .button(#e3ffff, #0072ff, #394857); }
.btn-secondary { .button(@btnColor, @btnColorBg, @btnColorBorder); }

.form-left {
	&:after {
		content: '';
		display: block;
		clear: both;
	}
	>* {
		float: left;
		vertical-align: middle;
		&:first-child:nth-last-child(1) {
			width: 100%;
		}
		&:first-child:nth-last-child(2),
		&:first-child:nth-last-child(2) ~ * {
			&:nth-child(1) { width: 70%; }
			&:nth-child(2) { width: 30%; }
		}
		&:first-child:nth-last-child(3),
		&:first-child:nth-last-child(3) ~ * {
			&:nth-child(1) { width: 30%; }
			&:nth-child(2) { width: 40%; }
			&:nth-child(3) { width: 30%; }
		}
	}
}

#ui {
	position: absolute;
	left: 0;
	top: 0;
	width: 100%/3;
	min-width: 320px;
	max-width: 100%;
	background-color: @uiBgColor;
	transition: opacity 200ms linear;
	.tab-title { margin: 1px 0; }
	>.tab { padding: 0; }
	@media (max-width:320px) {
		min-width: 100%;
	}
}
.touch #ui {}
.no-touch #ui {
	opacity: 0.1;
	&:hover { opacity: 1; }
}

#wrapper-track {
	position: relative;
	height: 64px;
	#track {
		&::-webkit-slider-runnable-track {
			height: 1px;
			top: 11px;
			background-color: @colorA1;
			box-shadow: none;
		}
		&::-moz-range-track {
			height: 1px;
			top: 11px;
			background-color: @colorA1;
			box-shadow: none;
		}
		&::-webkit-slider-thumb {
			transform: translateY(-9px);
		}
		&::-moz-range-thumb {
			transform: translateY(-9px);
		}
	}
	svg {
		position: absolute;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
	}
	path {
		fill:none;
		stroke-width:2;
		stroke:#fff;
		&:nth-child(1) { stroke: @colorConstant1; }
		&:nth-child(2) { stroke: @colorConstant2; }
		&:nth-child(3) { stroke: @colorConstant3; }
		&:nth-child(4) { stroke: @colorConstant4; }
		&:nth-child(5) { stroke: @colorConstant5; }
		&:nth-child(6) { stroke: @colorConstant6; }
		&:nth-child(7) { stroke: @colorConstant7; }
	}
	input {
		position: relative;
		top: 50%;
		transform: translateY(-50%);
	}
}

@storeSize: 15px;
@storeDiag: sqrt(2*@storeSize*@storeSize)/2.4;
#store-first, #store-last {
	position: absolute;
	top: -20px;
	width: @storeSize;
	height: @storeSize;
	border-radius: 3px;
	//border-radius: 50%;
	padding: 0;
	font-size: 0;
	&:before {
		content: '+';
		position: relative;
		z-index: 1;
		font-size: 14px;
		line-height: @storeSize;
		text-shadow: -1px -1px 1px rgba(0,0,0,0.3), 1px 1px 1px rgba(255,255,255,0.6);
	}
	&:after {
		content: '';
		position: absolute;
		left: 50%;
		top: 0;
		width: @storeDiag;
		height: @storeDiag;
		background-color: @btnColorBg;
		transform: translate(-50%,-50%) rotate(45deg);
	}
	/*&:after {
		content: '';
		position: absolute;
		left: @storeSize/2 - 1px;
		top: -10px;
		width: 1px;
		height: 10px;
		background-color: @colorA0;
	}*/
}
#store-first {
	left: -@storeSize/2 + 1px;
}
#store-last {
	right: -@storeSize/2 + 1px;
}

@colorBrace: @colorA3;
@braceThickness: 2px;
@braceRadius: 20px;
@braceBgWidth: 2*@braceRadius - @braceThickness;
@braceRadiusStart: @braceRadius - @braceThickness;
@braceRadiusStartA: @braceRadiusStart - 0.5px;
@braceRadiusStartB: @braceRadiusStart + 0.5px;
@braceRadiusEndA: @braceRadius - 0.5px;
@braceRadiusEndB: @braceRadius + 0.5px;
.brace {
  width: auto;
  min-width: @braceBgWidth;
  padding-bottom: @braceRadius;
  position: relative;
  text-align: center;
  vertical-align: middle;
  margin: 0 @braceRadiusStart @braceRadiusStart;
  border: none;
  background-color: transparent;
  background-image:
    radial-gradient(circle at 0 0, fade(@colorBrace,0) @braceRadiusStartA, @colorBrace @braceRadiusStartB, @colorBrace @braceRadiusEndA, fade(@colorBrace,0) @braceRadiusEndB),
    radial-gradient(circle at @braceBgWidth 0, fade(@colorBrace,0) @braceRadiusStartA, @colorBrace @braceRadiusStartB, @colorBrace @braceRadiusEndA, fade(@colorBrace,0) @braceRadiusEndB);
  background-size: @braceBgWidth @braceRadius;
  background-position: center bottom;
  background-repeat: no-repeat;
  color: @colorBrace;
  &:before, &:after {
    content: '';
		position: absolute;
		top: 100%;
		display: block;
    width: 50%;
    height: 100%;
		box-sizing: border-box;
    margin-top: -@braceThickness;
    border-top: @braceThickness solid @colorBrace;
  }
  &:before {
    border-left: 1px solid transparent;
    border-top-left-radius: 20% 30px;
    height: 100%;
  	left: -15px;
  }
  &:after {
  	right: -15px;
    border-right: 1px solid transparent;
    border-top-right-radius: 20% 30px;
  }
	&.down {
  	margin: @braceRadiusStart @braceRadiusStart 0;
		background-image:
			radial-gradient(circle at 0 @braceRadius, fade(@colorBrace,0) @braceRadiusStartA, @colorBrace @braceRadiusStartB, @colorBrace @braceRadiusEndA, fade(@colorBrace,0) @braceRadiusEndB),
			radial-gradient(circle at @braceBgWidth @braceRadius, fade(@colorBrace,0) @braceRadiusStartA, @colorBrace @braceRadiusStartB, @colorBrace @braceRadiusEndA, fade(@colorBrace,0) @braceRadiusEndB);
		&:before, &:after {
			top: -100%;
    	margin-top: @braceThickness;
			border-top: 0;
			border-bottom: @braceThickness solid @colorBrace;
		}
		&:before { border-bottom-left-radius: 20% 30px; }
		&:after { border-bottom-right-radius: 20% 30px; }
	}
}
.brace.down { margin-top: 10px; }

#set-sines {
	margin-left: 50%;
	transform: translateX(-50%);
	margin-bottom: 5px;
}

#render {
	display: block;
	position: relative;
	.render, .cancel {
		position: relative;
		z-index: 1;
	}
	.cancel {
		display: none;
		span {
			font-size: 12px;
			&:before { content: '('; }
			&:after { content: ' seconds left)'; }
		}
	}
	.progress {
		position: absolute;
		left: 0;
		top: 0;
		display: none;
		z-index: 0;
		width: 0;
		height: 100%;
		background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.65) 100%);
		border-radius: 2px;
	}
	&.rendering {
		.render { display: none; }
		.cancel, .progress { display: block; }
	}
}

#constants {
	margin-bottom: 10px;
	.form-group { margin-bottom: 3px; }
}

#constants, #sines, #offsets {
	fieldset:nth-of-type(1) input[type=range]::-webkit-slider-runnable-track { background-color: @colorConstant1; }
	fieldset:nth-of-type(2) input[type=range]::-webkit-slider-runnable-track { background-color: @colorConstant2; }
	fieldset:nth-of-type(3) input[type=range]::-webkit-slider-runnable-track { background-color: @colorConstant3; }
	fieldset:nth-of-type(4) input[type=range]::-webkit-slider-runnable-track { background-color: @colorConstant4; }
	fieldset:nth-of-type(5) input[type=range]::-webkit-slider-runnable-track { background-color: @colorConstant5; }
	fieldset:nth-of-type(6) input[type=range]::-webkit-slider-runnable-track { background-color: @colorConstant6; }
	fieldset:nth-of-type(7) input[type=range]::-webkit-slider-runnable-track { background-color: @colorConstant7; }

	fieldset:nth-of-type(1) input[type=range]::-moz-range-track { background-color: @colorConstant1; }
	fieldset:nth-of-type(2) input[type=range]::-moz-range-track { background-color: @colorConstant2; }
	fieldset:nth-of-type(3) input[type=range]::-moz-range-track { background-color: @colorConstant3; }
	fieldset:nth-of-type(4) input[type=range]::-moz-range-track { background-color: @colorConstant4; }
	fieldset:nth-of-type(5) input[type=range]::-moz-range-track { background-color: @colorConstant5; }
	fieldset:nth-of-type(6) input[type=range]::-moz-range-track { background-color: @colorConstant6; }
	fieldset:nth-of-type(7) input[type=range]::-moz-range-track { background-color: @colorConstant7; }
}

#sines, #offsets {
	width: 50%;
	float: left;
}

#track { width: 100%; }

#image {
	img {
		max-width: 100%;
		margin-bottom:10px;
		image-rendering: pixelated;
	}
	&.zoom {
		position: relative;
		height: 200px;
		overflow: hidden;
		img {
			max-width: none;
			position: relative;
			left: 50%;
			top: 50%;
			transform: translateX(-50%) translateY(-50%) scale(4,4);
		}
	}
}

#stats {
	position: absolute;
	right: 0;
	bottom: 0;
}

label[for^=tabs-]{
	position: relative;
	display: block;
	margin-bottom: 0;
	padding: 2px @padding 0;
	font-size: 14px;
	line-height: 120%;
	color: @headerColor;
	background-color: @headerBg;
	cursor: pointer;
	border-top-right-radius: 2px;
	border-bottom-right-radius: 2px;
	background: linear-gradient(to right, @headerBg 0%, darken(@headerBg,10%) 100%);
	box-shadow: 1px 1px 1px 1px rgba(0,0,0,0.4);
}
.tab label[for^=tabs-]{
	background: linear-gradient(to right, darken(@headerBg,10%) 0%, darken(@headerBg,20%) 100%);
}
input.tabs {
	display: none;
	+*{
		position: relative;
		max-height: 0;
		padding: 0 @padding;
		overflow: hidden;
		transition: max-height 200ms ease-in-out, padding 200ms ease-in-out;
	}
	&:checked+*{
		max-height: 1000px;
		padding: 10px @padding;
		overflow: visible;
	}
}

input.switch {
	display: none;
	+*{
		position: relative;
		max-height: 0;
		overflow: hidden;
		transition: max-height 200ms ease-in-out, padding 200ms ease-in-out;
	}
	&:checked+*{
		max-height: 1000px;
		overflow: visible;
	}
}

[data-info] {
	position: relative;
	&:before {
		content: attr(data-info);
		position: absolute;
		right: -@padding;
		top: 10px;
		z-index: 2;
		display: block;
		visibility: hidden;
		width: 200px;
		padding: 10px 10px 10px 0;
		opacity: 0;
		font-size: 11px;
		color: #FFBD00;
		border-radius: 2px;
		background-color: @uiBgColor;
		transform: translateX(100%) translateY(-50%);
		box-shadow: 0 0 0 1px #000000, 1px 0 0 1px #000000, 1px 0 0 2px #FFBD00;
		transition: opacity 200ms 0ms linear, visibility 0ms 200ms linear;
	}
	&:hover:before {
		visibility: visible;
		opacity: 1;
		transition: opacity 200ms 1000ms linear, visibility 0ms 1000ms linear;
	}
}
///////////////////////////////////////////////////////

input.imitate {
	@size: 16px;
	display: none;
	+label {
		position: relative;
		width: 100%!important;
		&:after {
			.form-control;
			content: '';
			position: absolute;
			top: 0;
			right: 0;
			display: block;
			width: @size;
			height: @size;
			background-color: #EEE;
			text-align: center;
			color: #1877BA;
			font-size: @size;
			line-height: @size;
			font-weight: bold;
			box-shadow: 2px 2px 4px rgba(0,0,0,0.3) inset;
		}
	}
	&:checked+label:after { content: 'v'; }
}

///////////////////////////////////////////////////////

input[type=color] {
	&, *, &::-webkit-color-swatch-wrapper, &::-webkit-color-swatch {
		padding: 0;
		box-shadow: -2px -2px 8px rgba(0,0,0,0.2) inset, 2px 2px 8px rgba(255,255,255,0.3) inset;
	}
	&::-webkit-color-swatch-wrapper, &::-webkit-color-swatch {
		border: 0;
	}
}

///////////////////////////////////////////////////////

input[type=text], input[type=number], input[type=color], option, select {
	&, &.form-control, &:disabled {
		background-color: #DAE8EC;
		border-radius: @btnRadius;
		box-shadow: 2px 4px 16px rgba(0,0,0,0.2) inset;
		color: #222;
	}
}

// range
input[type=range] {
	@rangeBtnW: 10px;
	@rangeBtnH: 20px;
	@rangeTrackH: 6px;
  -webkit-appearance: none;
  width: 100%;
	height: @rangeBtnH;
	background-color: transparent;
	border: 0;
	transform: translateX(1px);
	&, * {
		outline: none;
		cursor: pointer;
	}
	// track
	&::-webkit-slider-runnable-track {
		width: 100%;
		height: @rangeTrackH;
		margin: 0;
		background-color: darken(@btnColorBg,20%);
		border-radius: @btnRadius;
		border: 0;
		box-shadow: 2px 2px 4px rgba(0,0,0,0.3) inset;
		&:hover { background-color: darken(@btnHoverColorBg,20%); }
	}
	&::-moz-range-track {
		width: 100%;
		height: @rangeTrackH;
		margin: 0;
		background-color: darken(@btnColorBg,20%);
		border-radius: @btnRadius;
		border: 0;
		box-shadow: 2px 2px 4px rgba(0,0,0,0.3) inset;
		&:hover { background-color: darken(@btnHoverColorBg,20%); }
	}
	// thumb
	&::-webkit-slider-thumb {
		height: @rangeBtnH;
		width: @rangeBtnW;
		margin: 0;
		transform: translateY(-(@rangeBtnH - @rangeTrackH)/2);
		border: 1px solid @btnColorBorder;
		border-radius: @btnRadius;
		background: @btnColorBg;
		cursor: pointer;
		-webkit-appearance: none;
		&:hover { background-color: @btnHoverColorBg; }
	}
	&::-moz-range-thumb {
		height: @rangeBtnH;
		width: @rangeBtnW;
		margin: 0;
		transform: translateY(-(@rangeBtnH - @rangeTrackH)/2);
		border: 1px solid @btnColorBorder;
		border-radius: @btnRadius;
		background: @btnColorBg;
		cursor: pointer;
		-webkit-appearance: none;
		&:hover { background-color: @btnHoverColorBg; }
	}
	// number
	+input[type=number], +input[type=text] {
		position: relative;
		z-index: 1;
		border: 1px solid @btnColorBg;
	}
}
